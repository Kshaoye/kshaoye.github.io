import{_ as a,c as e,o as d,ag as s}from"./chunks/framework.z0p7P-Mv.js";const u=JSON.parse('{"title":"Kubernetes集群节点扩容实战","description":"","frontmatter":{},"headers":[],"relativePath":"zh/k8s/k8sNodeScaling.md","filePath":"zh/k8s/k8sNodeScaling.md"}'),n={name:"zh/k8s/k8sNodeScaling.md"};function l(r,t,o,p,i,h){return d(),e("div",null,[...t[0]||(t[0]=[s(`<h1 id="kubernetes集群节点扩容实战" tabindex="-1">Kubernetes集群节点扩容实战 <a class="header-anchor" href="#kubernetes集群节点扩容实战" aria-label="Permalink to &quot;Kubernetes集群节点扩容实战&quot;">​</a></h1><h2 id="_1-1-部署目标" tabindex="-1">1.1 部署目标 <a class="header-anchor" href="#_1-1-部署目标" aria-label="Permalink to &quot;1.1 部署目标&quot;">​</a></h2><p>在Kubernetes集群中添加node节点及master节点</p><h2 id="_1-2-初始集群架构" tabindex="-1">1.2 初始集群架构 <a class="header-anchor" href="#_1-2-初始集群架构" aria-label="Permalink to &quot;1.2 初始集群架构&quot;">​</a></h2><p>参考<a href="./DeployK8sClusterWithKubeasz.html">基于kubeasz的k8s v1.34.x高可用集群部署</a>部署一个单master，单Node的k8s集群</p><table tabindex="0"><thead><tr><th>节点类型</th><th>数量</th><th>功能</th><th>IP</th></tr></thead><tbody><tr><td>master</td><td>1</td><td>k8s控制端</td><td>172.31.7.101</td></tr><tr><td>harbor</td><td>1</td><td>镜像服务器</td><td>172.31.7.104</td></tr><tr><td>etcd</td><td>1</td><td>保存集群数据</td><td>172.31.7.106</td></tr><tr><td>HA</td><td>1</td><td>高可用</td><td>172.31.7.109</td></tr><tr><td>deploy</td><td>1</td><td>部署用、后期可作为HA</td><td>172.31.7.110</td></tr><tr><td>node</td><td>1</td><td>运行容器</td><td>172.31.7.111</td></tr></tbody></table><h2 id="_1-3-目标集群架构" tabindex="-1">1.3 目标集群架构 <a class="header-anchor" href="#_1-3-目标集群架构" aria-label="Permalink to &quot;1.3 目标集群架构&quot;">​</a></h2><p>添加一个master节点和一个Node节点</p><table tabindex="0"><thead><tr><th>节点类型</th><th>数量</th><th>功能</th><th>IP</th></tr></thead><tbody><tr><td>master</td><td>2</td><td>k8s控制端</td><td>172.31.7.101、102</td></tr><tr><td>harbor</td><td>1</td><td>镜像服务器</td><td>172.31.7.104</td></tr><tr><td>etcd</td><td>1</td><td>保存集群数据</td><td>172.31.7.106</td></tr><tr><td>HA</td><td>1</td><td>高可用</td><td>172.31.7.109</td></tr><tr><td>deploy</td><td>1</td><td>部署用、后期可作为HA</td><td>172.31.7.110</td></tr><tr><td>node</td><td>2</td><td>运行容器</td><td>172.31.7.111、112</td></tr></tbody></table><h2 id="_1-4-节点准备" tabindex="-1">1.4 节点准备 <a class="header-anchor" href="#_1-4-节点准备" aria-label="Permalink to &quot;1.4 节点准备&quot;">​</a></h2><p>配好IP地址、主机名、把deploy节点公钥传过去 具体步骤可参考<a href="./DeployK8sClusterWithKubeasz.html">基于kubeasz的k8s v1.34.x高可用集群部署</a></p><h2 id="_1-5-添加master节点" tabindex="-1">1.5 添加master节点 <a class="header-anchor" href="#_1-5-添加master节点" aria-label="Permalink to &quot;1.5 添加master节点&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ubuntu@deploy01:/etc/kubeasz$ ./ezctl add-master k8s-cluster1 172.31.7.102 k8s_nodename=&quot;172.31.7.102&quot;</span></span></code></pre></div><p>验证节点信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ubuntu@deploy01:~$ sudo kubectl get node</span></span>
<span class="line"><span>NAME               STATUS                     ROLES    AGE    VERSION</span></span>
<span class="line"><span>172.31.7.101       Ready,SchedulingDisabled   master   4d2h   v1.34.2</span></span>
<span class="line"><span>172.31.7.102       Ready,SchedulingDisabled   master   18s    v1.34.2 </span></span>
<span class="line"><span>172.31.7.111       Ready                      node     4d1h   v1.34.2</span></span></code></pre></div><h2 id="_1-6-添加node节点" tabindex="-1">1.6 添加node节点 <a class="header-anchor" href="#_1-6-添加node节点" aria-label="Permalink to &quot;1.6 添加node节点&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ubuntu@deploy01:/etc/kubeasz$ ./ezctl add-node k8s-cluster1 172.31.7.112 k8s_nodename=&quot;172.31.7.112&quot;</span></span>
<span class="line"><span>ubuntu@deploy01:~$ sudo kubectl get node</span></span>
<span class="line"><span>NAME               STATUS                     ROLES    AGE    VERSION</span></span>
<span class="line"><span>172.31.7.101       Ready,SchedulingDisabled   master   4d2h   v1.34.2</span></span>
<span class="line"><span>172.31.7.102       Ready,SchedulingDisabled   master   18s    v1.34.2 </span></span>
<span class="line"><span>172.31.7.111       Ready                      node     4d1h   v1.34.2</span></span>
<span class="line"><span>172.31.7.112       Ready                      node     2min   v1.34.2</span></span></code></pre></div>`,17)])])}const b=a(n,[["render",l]]);export{u as __pageData,b as default};
